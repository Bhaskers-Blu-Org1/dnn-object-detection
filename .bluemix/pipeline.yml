---
stages:
- name: BUILD
  inputs:
  - type: git
    branch: master
    service: ${SAMPLE_REPO}
  triggers:
  - type: commit
  jobs:
  - name: Build
    type: builder
- name: DEPLOY
  inputs:
  - type: job
    stage: BUILD
    job: Build
  triggers:
  - type: stage
  properties:
  - name: CF_APP_NAME
    value: undefined
    type: text
  - name: APP_URL
    value: undefined
    type: text
  jobs:
      - name: Deploy
        type: deployer
        target:
          region_id: ${PROD_REGION_ID}
          api_key: ${API_KEY}
          kubernetes_cluster: ${CLUSTER_NAME}
          application: Pipeline
        script: |
          #!/bin/bash
          ./scripts/deploy.sh
# hooks:
#   - enabled: true
#     label: null
#     ssl_enabled: false
#     url: https://devops-api-integration.stage1.ng.bluemix.net/v1/messaging/webhook/publish
